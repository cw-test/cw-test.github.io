{"version":3,"sources":["scripts.min.js"],"names":["$","angular","supapress_config","angularjs_support","module","run","$window","$rootScope","$location","supapress","changeURL","url","$apply","replace","jQuery","on","e","$search","$carousel","$eTarget","target","initSearches","each","$this","this","data","supapressSearchInit","initCarousels","supapressInit","is","find","length","index","value","$elem","window","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","gridAlign","maxHeight","$layout","$wrapper","height","addClass","setMaxCoverHeight","$images","settings","count","alignOnNextPrev","lazyLoad","attr","lazyLoadPlaceholder","off","slidesToShow","complete","trigger","fn","hasClass","slick","parent","css","$carouselContainer","debounceResize","$searchLayout","$sortBy","$perPage","$pagination","$previous","$page","$next","ajaxURL","params","current","total","reload","name","baseUrl","location","protocol","hostname","pathname","query","search","substring","split","i","param","regex","RegExp","test","trim","changeLocationHref","href","loadFilters","ajax","type","showText","hideText","clearText","limits","filters","success","response","html","removeClass","event","elem","$toggle","$additonalFilters","parents","text","parseInt","val"],"mappings":"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","file":"scripts.min.js","sourcesContent":["(function($) {\n     $(function() {\n\n        if(typeof angular === 'undefined') {\n            return false;\n        }\n\n        if (supapress_config.angularjs_support === 'true') {\n            angular.module('supapressAngular', []).run(['$window', '$rootScope', '$location', function ($window, $rootScope, $location) {\n                $window.supapress = $window.supapress || {};\n                $window.supapress.angular = $window.supapress.angular || {};\n                $window.supapress.angular.changeURL = function (url) {\n                    // Function to apply a url change\n                    $rootScope.$apply(function () {\n                        // Strip domain from URL\n                        $location.url(url.replace(/^.*\\/\\/[^\\/]+/, ''));\n                    });\n                };\n            }]);\n        }\n    });\n})(jQuery);\n(function($) {\n    $('body').on('DOMNodeInserted', function(e) {\n        var $eTarget = $(e.target), $search, $carousel,\n            initSearches = function($search) {\n                $search.each(function() {\n                    var $this = $(this);\n\n                    if(!$this.data('supapressInitialised')) {\n                        $this.supapressSearchInit();\n                    }\n                });\n            },\n            initCarousels = function($carousel) {\n                $carousel.each(function() {\n                    var $this = $(this);\n\n                    if(!$this.data('supapressInitialised')) {\n                        $this.supapressInit();\n                    }\n                });\n            };\n\n        // cater for the normal inserted divs on frontend\n        if ($eTarget.is('div.supapress')) {\n            $search = $eTarget.find('.search');\n            $carousel = $eTarget.find('.isbn-carousel');\n\n            initSearches($search);\n            initCarousels($carousel);\n        } else if ($eTarget.find('div.supapress').length > 0) {\n            $eTarget.find('div.supapress').each(function(index, value) {\n                var $elem = $(value);\n\n                $search = $elem.find('.search');\n                $carousel = $elem.find('.isbn-carousel');\n\n                initSearches($search);\n                initCarousels($carousel);\n            });\n        }\n    });\n})(jQuery);\n\n(function($) {\n    window.supapress = window.supapress || {};\n\n    var debounce = function(func, wait, immediate) {\n        var timeout;\n        return function() {\n            var context = this, args = arguments;\n            var later = function() {\n                timeout = null;\n                if (!immediate) func.apply(context, args);\n            };\n            var callNow = immediate && !timeout;\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n            if (callNow) func.apply(context, args);\n        };\n    };\n\n    supapress.gridAlign = function(maxHeight, $layout) {\n        var $wrapper = $layout.find('[data-baseline-images=wrapper]');\n        $wrapper.height(maxHeight);\n        $wrapper.find('[data-baseline-images=image]').addClass('baselined');\n        $layout.data('aligned', true);\n    };\n\n    supapress.setMaxCoverHeight = function($layout) {\n        var $wrapper = $layout.find('[data-baseline-images=wrapper]'),\n            $images = $wrapper.find('[data-baseline-images=image]'),\n            settings = $layout.data('carouselSettings') || {},\n            count = 0,\n            maxHeight = 0,\n            alignOnNextPrev = false,\n            onload;\n\n        $wrapper.addClass('image-wrapper');\n        $images.addClass('supapress-book-cover');\n\n        if(typeof settings.lazyLoad !== 'undefined') {\n            $layout.on('beforeChange', function() {\n                alignOnNextPrev = true;\n            });\n        }\n\n        if(!$layout.data('aligned')) {\n            $images.on('load', function (e) {\n                var $this = $(this);\n\n                // if lazyloading then first load will be placeholder, second will be real image\n                // if not lazy loading then this will be real image\n                // once real image has loaded we turn off the load event and use the each below instead\n                if (typeof settings.lazyLoad === 'undefined' || $this.attr('src') !== settings.lazyLoadPlaceholder) {\n                    count++;\n                    $this.off('load');\n                }\n\n                if ($this.height() > maxHeight) {\n                    maxHeight = $this.height();\n                }\n\n                // only fire while images are loading if the visible ones have finished loading\n                // don't want grid align to fire too much\n                if (count === $images.length || (typeof settings.lazyLoad !== 'undefined' && (count === settings.slidesToShow || alignOnNextPrev))) {\n                    alignOnNextPrev = false;\n                    return supapress.gridAlign(maxHeight, $layout);\n                }\n            }).each(function() {\n                if (this.complete) {\n                    $(this).trigger('load');\n                }\n            });\n        } else {\n            $images.each(function (index) {\n                var $this = $(this);\n\n                if ($this.height() > maxHeight) {\n                    maxHeight = $this.height();\n                }\n\n                // on the last image in the loop fire the grid alignment\n                if (index === ($images.length - 1)) {\n                    supapress.gridAlign(maxHeight, $layout);\n                }\n            });\n        }\n    };\n\n    $.fn.supapressInit = function() {\n        var $layout = this;\n\n        if( $layout.hasClass('isbn-carousel') && typeof $.fn.slick !== 'undefined' ) {\n            $layout.parent().css('overflow', 'visible');\n\n            var $carouselContainer = $layout.find('[data-container=\"carousel\"]');\n\n            if( $carouselContainer.length === 1 ) {\n                $carouselContainer.slick($layout.data('carouselSettings'));\n            } else {\n                $layout.slick($layout.data('carouselSettings'));\n            }\n        }\n\n        if( $layout.hasClass('isbn-grid') || $layout.hasClass('isbn-carousel') || $layout.hasClass('search-grid') ) {\n            var debounceResize = debounce(function() {\n                supapress.setMaxCoverHeight($layout);\n            }, 300);\n            $(window).on('resize orientationchange', debounceResize);\n        }\n\n        $layout.data('supapressInitialised', true);\n    };\n\n    $('div.supapress > div').each(function() {\n        $(this).supapressInit();\n    });\n\n    $(window).trigger('resize');\n})(jQuery);\n\n(function($) {\n    window.supapress = window.supapress || {};\n\n    supapress.$searchLayout = null;\n\n    supapress.$sortBy = null;\n\n    supapress.$perPage = null;\n\n    supapress.$pagination = null;\n\n    supapress.$previous = null;\n\n    supapress.$page = null;\n\n    supapress.$next = null;\n\n    supapress.ajaxURL = null;\n\n    supapress.params = null;\n\n    supapress.current = null;\n\n    supapress.total = null;\n\n    supapress.reload = function(name, value) {\n        // Get base url\n        var baseUrl = window.location.protocol + '//' + window.location.hostname + window.location.pathname;\n\n        if(typeof name !== 'undefined' && typeof value !== 'undefined') {\n            // Get current query string\n            var query = window.location.search.substring(1);\n\n            // Split up query into array\n            var params = query.split('&');\n\n            query = '';\n\n            // Loop query params\n            for (var i=0; i<params.length; i++) {\n                // Split into key value pair\n                var param = params[i].split('=');\n\n                // If the key is blank (i.e. no query string) or the value is undefined or blank and the key is not the new param continue\n                if(param[0] === '' || (typeof param[1] === 'undefined' && param[0] !== name) || (param[1] === '' && param[0] !== name) || (param[0] === name && value === false)) {\n                    continue;\n                }\n\n                // Reset page number is any other params change as the result set changes to start from page 1\n                if(param[0] === 'page_number' && name !== 'page_number') {\n                    param[1] = 1;\n                }\n\n                // Add the key pair to the query string\n                query += query === '' ? '' : '&';\n                query += param[0] + '=';\n                query += param[0] === name ? value : param[1];\n            }\n\n            // Build regex param= to make sure it's been added\n            var regex = new RegExp(name + '=', 'g');\n\n            // If the new param is not added yet then added\n            if(regex.test(query) === false && value !== false) {\n                query += query === '' ? '' : '&';\n                query += name + '=' + value;\n            }\n\n            // reload the page with the new url\n            if($.trim(query) !== '') {\n                supapress.changeLocationHref(baseUrl + '?' + query);\n            } else {\n                supapress.changeLocationHref(baseUrl);\n            }\n        } else {\n            supapress.changeLocationHref(baseUrl);\n        }\n    };\n\n    supapress.changeLocationHref = function(url) {\n        if (typeof angular !== 'undefined' && supapress_config.angularjs_support === 'true') {\n            supapress.angular.changeURL(url);\n        } else {\n            window.location.href = url;\n        }\n    };\n\n    supapress.loadFilters = function() {\n        $.each(supapress.$searchLayout.find('.filter-load-wrapper'), function() {\n            var $this = $(this);\n\n            $.ajax({\n                url: supapress.ajaxURL + '?action=supapress_filters',\n                type: 'GET',\n                data: {\n                    params: supapress.params,\n                    showText: $this.data('show-text'),\n                    hideText: $this.data('hide-text'),\n                    clearText: $this.data('clear-text'),\n                    limits: $this.data('filter-limits'),\n                    filters: $this.data('filters')\n                },\n                success: function( response ) {\n                    $this.html( response ).removeClass('preloader-on');\n\n                    $this.find('a').on('click', function(event) {\n                        var $this = $(this);\n\n                        if($this.hasClass('clear-filters')) {\n                            supapress.reload();\n                        } else if($this.hasClass('clear-filter') && $this.attr('data-name')) {\n                            supapress.reload($this.attr('data-name'), false);\n                        } else if($this.attr('data-name') && $this.attr('data-seo')) {\n                            supapress.reload($this.attr('data-name'), $this.attr('data-seo'));\n                        }\n                    });\n\n                    $this.find('.additional-filters').each(function(index, elem) {\n                        var $elem = $(elem),\n                            height = $elem.height();\n\n                        $elem.css('height', height).data('height', height).css('maxHeight', 0);\n                    });\n\n                    $this.find('.additional-filters-toggle').on('click', function() {\n                        var $toggle = $(this),\n                            $additonalFilters = $toggle.parents('.filter-block').find('.additional-filters');\n\n                        if($additonalFilters.css('maxHeight') !== '0px') {\n                            $toggle.text($toggle.data('showLabel'));\n                            $additonalFilters.css('maxHeight', 0);\n                        } else {\n                            $toggle.text($toggle.data('hideLabel'));\n                            $additonalFilters.css('maxHeight', $additonalFilters.data('height'));\n                        }\n                    });\n                }\n            });\n        });\n    };\n\n    $.fn.supapressSearchInit = function() {\n        supapress.$searchLayout = this;\n        supapress.$sortBy = supapress.$searchLayout.find('.supapress-sort-by');\n        supapress.$perPage = supapress.$searchLayout.find('.supapress-per-page');\n        supapress.$pagination = supapress.$searchLayout.find('.supapress-pagination-wrapper');\n        supapress.$previous = supapress.$pagination.find('.supapress-previous');\n        supapress.$page = supapress.$pagination.find('.supapress-page');\n        supapress.$next = supapress.$pagination.find('.supapress-next');\n        supapress.ajaxURL = supapress.$searchLayout.parents('.supapress').data('ajax-url');\n        supapress.params = supapress.$searchLayout.parents('.supapress').data('widget-params');\n        supapress.current = parseInt(supapress.$pagination.attr('data-current'));\n        supapress.total = parseInt(supapress.$pagination.attr('data-total'));\n\n        // Load filters\n        supapress.loadFilters();\n\n        // Add event listeners for sort by\n        supapress.$sortBy.on('change', function() {\n            supapress.reload('supapress_order', $(this).val());\n        });\n\n        // Add event listeners for per page\n        supapress.$perPage.on('change', function() {\n            supapress.reload('amount', $(this).val());\n        });\n\n        // Add event listeners for previous page\n        supapress.$previous.on('click', function() {\n            if(supapress.current === 1) {\n                supapress.reload('page_number', supapress.total);\n            } else {\n                supapress.reload('page_number', supapress.current - 1);\n            }\n        });\n\n        // Add event listeners for page changer\n        supapress.$page.on('click', function() {\n            supapress.reload('page_number', $(this).attr('data-page'));\n        });\n\n        // Add event listeners for next page\n        supapress.$next.on('click', function() {\n            if(supapress.current === supapress.total) {\n                supapress.reload('page_number', 1);\n            } else {\n                supapress.reload('page_number', supapress.current + 1);\n            }\n        });\n\n        supapress.$searchLayout.data('supapressInitialised', true);\n    };\n\n    $('div.supapress .search').supapressSearchInit();\n})(jQuery);"]}