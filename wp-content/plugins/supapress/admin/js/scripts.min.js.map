{"version":3,"sources":["scripts.min.js"],"names":["$","$supapressJQuery","jQuery","noConflict","$wrap","$form","find","$step1","$step2","$message","$element","$selector","$step1NextButton","$widgetTitleWrapper","$widgetTypeWrapper","$widgetTitle","$widgetLayout","$subContentSwitch","$navTab","$navTabContent","$layoutContent","$isbnLookupSource","$isbnLookupBulk","$isbnLookupSourceInputs","$saveButtonWrapper","fadeIn","fadeOut","typeParameter","step2positioning","prependTo","hide","on","$this","this","$label","attr","parent","setTabs","val","setNavContent","hasClass","removeClass","addClass","trigger","$container","selector","each","$elem","show","removeAttr","type","length","filter","prop","getUrlParameter","sParam","sParameterName","i","sPageURL","decodeURIComponent","window","location","search","substring","sURLVariables","split","undefined","$navTabClicked","trim","text","$content","css","$elementParent","parents","$elementArrow","$elementConfig","slideDown","slideUp","scrollTo","click","$isbnList","$price","$filters","$sortBy","$perPage","$showPerPage","$perPageInput","$perPageInputButton","$perPageDefault","$asmIsbnLookup","$isbnLookup","$isbnLookupLabel","$lookupCollection","$editCollectionButton","$arrowUpload","$arrowPreview","$clearCacheButton","$addBulkISBNsButton","$addBulkISBNs","isbnLookupAjaxUrl","$supapressAddEditForm","$searchFilterLists","$isbnContainer","asmSelect","addItemTarget","animate","hideWhenAdded","highlight","listType","selectClass","sortable","highlightOutsideContainer","removeLabel","svgUrl","insertBefore","html","sort","a","b","arel","brel","ajax","url","data","ISBNs","replace","dataType","success","isbn13","book","label","title","key","$existingOption","$option","selected","data-isbn","found","remove","append","change","number","alert","keypress","e","which","$perPageSelectedOptions","children","$perPageDefaultSelectedOptions","currentPerPageDefaultValue","select2","value","empty","newOption","$priceLocale","siblings","$filtersAsm","$sortByAsm","resetButton","filesRemoved","updateMessage","tense","error","console","autocomplete","source","request","response","term","predictive","Array","map","item","id","name","minLength","open","menu","element","autoFocus","focus","event","preventDefault","select","ui","keyCode","Event","details","isbn","test","index","$newOption","collection","seo_name","data-id","data-seo","catalogId","formfieldId","originalFunction","send_to_editor","tb_show","imgurl","tb_remove","$preview","src","placeholder","parseInt","isNaN","$parents","$slug","$urlPattern","tooltip","tooltipClass","content","callback","position","my","at","collision","using","feedback","vertical","horizontal","appendTo","fn","reorderSelect2Dropdown","is","bt","minimumResultsForSearch","dropdownCssClass","message","level","scrollTop","svg4everybody","supapress","bookUrlOptions","example","resultCountTextOptions","searchTermTextOptions","insertAtCaret","newText","start","end","before","after","selectionStart","selectionEnd","addAutoComplete","options","_renderItem","ul","shiftKey","relativeLink","regex","$bookUrl","obj","RegExp","supapressAdminInit","$resultCountText","$searchTermText","$seoCanonical","pattern","page","domainProtocolRegExp","errorMessage","pageVal"],"mappings":"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","file":"scripts.min.js","sourcesContent":["(function($) {\n    var $supapressJQuery = jQuery.noConflict(),\n        $wrap = $supapressJQuery('.supapress-wrap'),\n        $form = $wrap.find('#supapress-add-edit-form'),\n        $step1 = $wrap.find('#step1'),\n        $step2 = $wrap.find('#step2'),\n        $message = $wrap.find('#message'),\n        $element = $wrap.find('.supapress-accordion-header'),\n        $selector = $wrap.find('.elements.nav-tab-content .selector'),\n        $step1NextButton = $wrap.find(\"#step1_next_btn\"),\n        $widgetTitleWrapper = $wrap.find(\".widget-title-wrapper\"),\n        $widgetTypeWrapper = $wrap.find('.widget-type-wrapper'),\n        $widgetTitle = $widgetTitleWrapper.find(\"#widget-title\"),\n        $widgetLayout = $wrap.find('input[name=\"widget_layout\"]'),\n        $subContentSwitch = $wrap.find('.sub-content-toggle'),\n        $navTab = $wrap.find(\".nav-tab\"),\n        $navTabContent = $wrap.find(\".nav-tab-content\"),\n        $layoutContent = $wrap.find(\".layout-content\"),\n        $isbnLookupSource = $wrap.find(\"#lookup_source\"),\n        $isbnLookupBulk = $wrap.find(\"#isbn_lookup_bulk\"),\n        $isbnLookupSourceInputs = $wrap.find(\".lookup-source-input\"),\n        $saveButtonWrapper = $wrap.find('.save-button-wrapper'),\n        fadeIn = true,\n        fadeOut = true,\n        typeParameter = '',\n        step2positioning = function() {\n            $widgetTypeWrapper.prependTo($step2);\n            $widgetTitleWrapper.prependTo($step2).find('p').hide();\n\n            $widgetTypeWrapper.find('input').on('change', function() {\n                var $this = $(this),\n                    $label = $widgetTypeWrapper.find('label[for=\"' + $this.attr('id') + '\"]');\n\n                $label.prependTo($label.parent());\n                $this.prependTo($this.parent());\n\n                // Set tabs\n                setTabs($widgetTypeWrapper.find('input:checked').val());\n\n                // Change tab content\n                setNavContent($navTabContent, $supapressJQuery('.nav-tab-active').attr('data-tab'));\n\n                // Change layout content\n                setNavContent($layoutContent, $supapressJQuery('.widget-layout-wrapper').find('input:checked').attr('data-sub-tab'));\n            });\n\n            $widgetTypeWrapper.find('input').on('click', function() {\n                if($widgetTypeWrapper.hasClass('open')) {\n                    $widgetTypeWrapper.removeClass('open');\n                } else {\n                    $widgetTypeWrapper.addClass('open');\n                }\n            });\n\n            $widgetTypeWrapper.find('input:checked').trigger('change');\n\n            // Set tabs\n            setTabs($widgetTypeWrapper.find('input:checked').val());\n\n            // Change tab content\n            setNavContent($navTabContent, $supapressJQuery('.nav-tab-active').attr('data-tab'));\n\n            // Change layout content\n            setNavContent($layoutContent, $supapressJQuery('.widget-layout-wrapper').find('input:checked').attr('data-sub-tab'));\n        },\n        setNavContent = function($container, selector) {\n            // Loop content wrappers and show the one matching the click tabs data value\n            $container.each(function() {\n                var $this = $(this);\n\n                // If the tab value is found show content\n                if($this.hasClass(selector) && !$this.hasClass('sub-content-wrapper')) {\n                    if(selector === 'elements') {\n                        $selector.find('.supapress-field-wrapper').each(function() {\n                            var $elem = $(this);\n\n                            if(!$elem.hasClass('all-tabs') && !$elem.hasClass($widgetTypeWrapper.find('input:checked').val())) {\n                                $elem.hide().find('input:checked').attr('checked', false);\n                            } else {\n                                $elem.show();\n                            }\n                        });\n                    } else if(selector === 'arrangement') {\n                        $this.find('.widget-layout-wrapper-inner').each(function() {\n                            var $elem = $(this);\n\n                            if($elem.hasClass($widgetTypeWrapper.find('input:checked').val())) {\n                                $elem.show();\n                            } else {\n                                $elem.hide();\n                            }\n                        });\n                    }\n\n                    $this.show();\n                } else {\n                    $this.hide();\n                }\n            });\n\n            // Hide elements not specific to widget type\n            $('.widget-type-specific').each(function() {\n                var $elem = $(this);\n\n                if($elem.hasClass($widgetTypeWrapper.find('input:checked').val())) {\n                    $elem.show();\n\n                    if($elem.hasClass('custom_layout_file')) {\n                        $elem.find('select').removeAttr('disabled');\n                    }\n                } else {\n                    $elem.hide();\n\n                    if($elem.hasClass('custom_layout_file')) {\n                        $elem.find('select').attr('disabled', 'disabled');\n                    }\n                }\n            });\n            \n            // Temporary hack to hide all carousel elements when the widget is not isbn_lookup\n            if($widgetTypeWrapper.find('input:checked').val() !== 'isbn_lookup') {\n                $wrap.find('.carousel.layout-content').hide();\n\n                if($supapressJQuery('.widget-layout-wrapper').find('input:checked').val() === 'carousel') {\n                    $wrap.find('#widget_layout1').trigger('click');\n                }\n            }\n\n            // Turn fade in off as trigger comes from tab change\n            fadeIn = false;\n            // Turn fade out off when switching between module types\n            fadeOut = false;\n\n            // Trigger change to set on page load\n            $subContentSwitch.trigger('change');\n\n            // Turn fade out back on so it works when you click on/off element switches\n            fadeOut = true;\n        },\n        setTabs = function(type) {\n            if(type === 'product_details') {\n                // show arrangement if there are custom templates\n                if(!$wrap.find('.custom_layout_file.product_details').length) {\n                    $wrap.find('.nav-tab[data-tab=\"content\"], .nav-tab[data-tab=\"arrangement\"]').removeClass('nav-tab-active').hide();\n                    $widgetLayout.filter('[value=\"grid\"]').prop('checked', true);\n                } else {\n                    $wrap.find('.nav-tab[data-tab=\"content\"]').removeClass('nav-tab-active').hide();\n                    $wrap.find('.nav-tab[data-tab=\"arrangement\"]').removeClass('nav-tab-active').show();\n                    $widgetLayout.filter('[value=\"custom\"]').prop('checked', true);\n                }\n                $wrap.find('.nav-tab[data-tab=\"elements\"]').addClass('nav-tab-active').show();\n                $wrap.find('.nav-tab[data-tab=\"restrictions\"]').hide();\n            } else if(type === 'search_results') {\n                $wrap.find('.nav-tab').removeClass('nav-tab-active').show();\n                $wrap.find('.nav-tab[data-tab=\"content\"], .nav-tab[data-tab=\"seo\"]').hide();\n                $wrap.find('.nav-tab[data-tab=\"restrictions\"]').show();\n                $wrap.find('.nav-tab[data-tab=\"elements\"]').addClass('nav-tab-active');\n            } else {\n                $wrap.find('.nav-tab').removeClass('nav-tab-active').show();\n                $wrap.find('.nav-tab[data-tab=\"seo\"], .nav-tab[data-tab=\"restrictions\"]').hide();\n                $wrap.find('.nav-tab[data-tab=\"content\"]').addClass('nav-tab-active');\n            }\n        },\n        getUrlParameter = function getUrlParameter(sParam) {\n            var sPageURL = decodeURIComponent(window.location.search.substring(1)),\n                sURLVariables = sPageURL.split('&'),\n                sParameterName,\n                i;\n\n            for (i = 0; i < sURLVariables.length; i++) {\n                sParameterName = sURLVariables[i].split('=');\n\n                if (sParameterName[0] === sParam) {\n                    return sParameterName[1] === undefined ? '' : sParameterName[1];\n                }\n            }\n        };\n\n    // Add click events to navigation tabs\n    $navTab.on('click', function() {\n        var $navTabClicked = $(this),\n            saveButtonWrapperHidden = $saveButtonWrapper.hasClass('hide');\n\n        // Remove and add new active class\n        $navTab.removeClass('nav-tab-active');\n        $navTabClicked.addClass('nav-tab-active');\n\n        // Change tab content\n        setNavContent($navTabContent, $navTabClicked.attr('data-tab'));\n    });\n\n    // Add change event to layout selector\n    $widgetLayout.on('change', function() {\n        // Change tab content\n        setNavContent($layoutContent, $(this).attr('data-sub-tab'));\n    });\n\n    // Trigger change to set on page load\n    setNavContent($layoutContent, $('input[name=\"widget_layout\"]:checked').attr('data-sub-tab'));\n\n    // Add change event to lookup source to show / hide relevant inputs\n    $isbnLookupSource.on('change', function() {\n        $isbnLookupSourceInputs.each(function() {\n            var $this = $(this);\n\n            // If the lookup source value is found show input\n            if($this.hasClass($isbnLookupSource.val())) {\n                $this.show();\n            } else {\n                $this.hide();\n            }\n        });\n    });\n\n    // Trigger change to set on page load\n    $isbnLookupSource.trigger('change');\n\n    // Add click event to next button follow widget title and type selection\n    $step1NextButton.on('click', function() {\n        if($.trim($widgetTitle.val()) === '') {\n            $message.addClass('warning').removeClass('hide');\n            $message.find('p').text('Please enter a name for your widget');\n        } else {\n            $step1.hide();\n            $step2.show();\n            $message.addClass('hide');\n\n            step2positioning();\n        }\n    });\n\n    // On toggle switch show / hide attached sub content\n    $subContentSwitch.on('change', function() {\n        var $this = $(this),\n            $content = $('div.' + $this.attr('data-sub-content'));\n\n        if($this.prop('checked') && ($content.hasClass($('input[name=\"widget_layout\"]:checked').attr('data-sub-tab')) || $content.hasClass('tab-level'))) {\n            if($content.css('display') === 'none' && fadeIn) {\n                $content.fadeIn();\n            } else {\n                $content.show();\n            }\n        } else {\n            if($content.css('display') !== 'none' && fadeOut) {\n                $content.fadeOut();\n            } else {\n                $content.hide();\n            }\n        }\n\n        // Reset to fade in\n        fadeIn = true;\n    });\n\n    // Show / Hide the config settings for the element\n    $element.on('click', function() {\n        var $this = $(this),\n            $elementParent = $this.parents('.supapress-accordion-wrapper'),\n            $elementArrow = $elementParent.find('.svg-right-arrow'),\n            $elementConfig = $elementParent.find('.supapress-accordion-content');\n\n        if($elementConfig.css('display') === 'none') {\n            $elementConfig.slideDown();\n            $elementArrow.addClass('open');\n            $this.addClass('open');\n        } else {\n            $elementConfig.slideUp();\n            $elementArrow.removeClass('open');\n            $this.removeClass('open');\n        }\n    });\n\n    // Catch form submit for validation checks\n    $form.on('submit', function() {\n        if($.trim($widgetTitle.val()) === '') {\n            $message.addClass('warning').removeClass('hide');\n            $message.find('p').text('Please enter a name for your widget');\n            return false;\n        } else if($wrap.find('.elements.nav-tab-content .selector input:checked').length === 0) {\n            // Set message\n            $message.addClass('warning').removeClass('hide');\n            $message.find('p').text('Please choose at least one element to display in your widget.');\n            $wrap.find('.nav-tab[data-tab=\"elements\"]').trigger('click');\n            // Block the submission and scroll to the top to display the warning\n            window.scrollTo(0, 0);\n            return false;//\n        } else if($widgetTypeWrapper.find('input:checked').val() !== 'product_details' && !$('input[name=\"widget_layout\"]:checked').parents('.widget-layout-wrapper-inner').hasClass($widgetTypeWrapper.find('input:checked').val())) {\n            // 'product_details' check is  temporary until product details has multiple layouts\n            // Set message\n            $message.addClass('warning').removeClass('hide');\n            $message.find('p').text('Please choose how to display your widget (e.g. Grid or List)');\n            $wrap.find('.nav-tab[data-tab=\"arrangement\"]').trigger('click');\n            // Block the submission and scroll to the top to display the warning\n            window.scrollTo(0, 0);\n            return false;\n        } else if ($widgetTypeWrapper.find('input:checked').val() === 'isbn_lookup' && $isbnLookupSource.val() === 'bulk' &&  $isbnLookupBulk.val() !== '' ) {\n            $message.addClass('warning').removeClass('hide');\n            $message.find('p').text('Please use the \"Add ISBN(s)\" button to add your entered ISBN(s) to the list.');\n            $wrap.find('.nav-tab[data-tab=\"content\"]').trigger('click');\n            // Block the submission and scroll to the top to display the warning\n            window.scrollTo(0, 0);\n            return false;\n        } else if($('input[name=\"widget_layout\"]:checked').val() === 'custom' && !$('#custom_layout_file_' + $('input[name=\"widget_type\"]:checked').val()).val()) {\n            // make sure there is a template selected when Custom is chosen as the layout\n            // Set message\n            $message.addClass('warning').removeClass('hide');\n            $message.find('p').text('Please select a template for your custom layout');\n            $wrap.find('.nav-tab[data-tab=\"arrangement\"]').trigger('click');\n            // Block the submission and scroll to the top to display the warning\n            window.scrollTo(0, 0);\n            return false;\n        }\n    });\n\n    // On page load if edit page go to step 2\n    if($wrap.hasClass('edit')) {\n        // Update heading positions\n        step2positioning();\n    }\n\n    // If linked from widget settings type will have been selected already so we need to go straight to step 2\n    typeParameter = getUrlParameter('type');\n    if(typeParameter) {\n        $widgetTypeWrapper.find('input[value=\"' + typeParameter + '\"]').click();\n        $step1.hide();\n        $step2.show();\n        $message.addClass('hide');\n\n        step2positioning();\n    }\n})(jQuery);\n\n(function ($) {\n    var $supapressJQuery = jQuery.noConflict(),\n        $isbnList = $supapressJQuery(\"#isbn_list\"),\n        $price = $supapressJQuery(\"#price\"),\n        $message = $supapressJQuery(\"#message\"),\n        $filters = $supapressJQuery(\"#filters\"),\n        $sortBy = $supapressJQuery(\"#sort_by\"),\n        $perPage = $supapressJQuery(\"#per_page\"),\n        $showPerPage = $supapressJQuery(\"#show_per_page\"),\n        $perPageInput = $supapressJQuery(\"#per_page_input\"),\n        $perPageInputButton = $supapressJQuery(\"#per_page_input_btn\"),\n        $perPageDefault = $supapressJQuery(\"#per_page_default\"),\n        $asmIsbnLookup = $('.supapress-isbn-lookup-asm'),\n        $isbnLookup = $supapressJQuery(\"#isbn_lookup\"),\n        $isbnLookupLabel = $supapressJQuery(\"#isbn_lookup_label\"),\n        $lookupCollection = $supapressJQuery('#lookup_collection'),\n        $editCollectionButton = $supapressJQuery('.edit-collection-button'),\n        $arrowUpload = $supapressJQuery('.arrow-upload, .placeholder-upload'),\n        $arrowPreview = $supapressJQuery('.show-arrows .image-preview, .lazy-load .image-preview'),\n        $clearCacheButton = $supapressJQuery(\"#supapress-clear-cache-button\"),\n        $addBulkISBNsButton = $supapressJQuery(\"#supapress-add-bulk-isbns-button\"),\n        $addBulkISBNs = $supapressJQuery(\"#isbn_lookup_bulk\"),\n        isbnLookupAjaxUrl = $isbnLookup.attr('data-ajax-url'),\n        $supapressAddEditForm = $supapressJQuery('#supapress-add-edit-form'),\n        $searchFilterLists = $supapressJQuery(\".supapress-search-restriction-list\");\n\n    var $isbnContainer = $isbnList.asmSelect({\n        addItemTarget: 'bottom',\n        animate: false,\n        hideWhenAdded: true,\n        highlight: true,\n        listType: 'ul',\n        selectClass: 'supapress-isbn-lookup-asm',\n        sortable: true,\n        highlightOutsideContainer: true,\n        removeLabel: 'x',\n        svgUrl: $isbnList.attr('data-svg-url')\n    });\n\n    $isbnLookupLabel.insertBefore($asmIsbnLookup);\n    $isbnLookup.insertBefore($asmIsbnLookup);\n\n    // Set price ASM select\n    $price.html($(\"option\", $price).sort(function (a, b) {\n        var arel = $(a).attr('rel');\n        var brel = $(b).attr('rel');\n        return arel == brel ? 0 : arel < brel ? -1 : 1;\n    }));\n\n    $price.asmSelect({\n        addItemTarget: 'bottom',\n        animate: false,\n        hideWhenAdded: true,\n        highlight: true,\n        listType: 'ul',\n        selectClass: 'supapress-dropdown supapress-price-locale-asm supapress-reorder-dropdown',\n        sortable: true,\n        highlightOutsideContainer: false,\n        removeLabel: 'x',\n        svgUrl: $isbnList.attr('data-svg-url')\n    });\n\n    // Look through ISBNs entered by user and add if okay\n    $addBulkISBNsButton.on('click', function () {\n        $.ajax({\n            url: 'admin-ajax.php?action=supapress_bulk_isbn_lookup',\n            type: 'POST',\n            data: {\n                ISBNs: $addBulkISBNs.val().replace(/\\n/g, ',').replace(/ /g, '').replace(/,+/g, ',')\n            },\n            dataType: 'json',\n            success: function (data) {\n                for (var isbn13 in data.ISBNs) {\n                    var book = data.ISBNs[isbn13],\n                        label = book.title + ' (' + isbn13 + ')',\n                        key = isbn13 + '|||' + book.title,\n                        $existingOption = $isbnList.find('option[data-isbn=\"' + isbn13 + '\"]:selected'),\n                        $option = $(\"<option>\").text(label).val(key).attr({\n                            \"selected\": true,\n                            \"data-isbn\": isbn13\n                        });\n\n                    if (book.found === -1) {\n                        $option.addClass('book-not-found');\n                    }\n\n                    if ($existingOption.length === 1) {\n                        $existingOption.remove();\n                    }\n\n                    $isbnList.append($option);\n                }\n\n                $isbnList.change();\n                $addBulkISBNs.val('');\n            }\n        });\n    });\n\n    // Click the per page search filter\n    $perPageInputButton.on('click', function () {\n        var number = $(\"#per_page_input\").val();\n\n        if (number > 100 || number < 1) {\n            alert('Number should be between 1 and 100');\n        } else if ($(\"#per_page option:selected[value='\" + number + \"']\").length) {\n            alert(number + ' has already been set');\n        } else if (number) {\n            $perPageDefault.append($(\"<option></option>\").text(number).attr(\"value\", number));\n            $perPage.append($(\"<option></option>\").text(number).attr(\"selected\", true).attr(\"value\", number)).change();\n        }\n\n        $perPageInput.val('');\n\n        return false;\n    });\n\n    // Allow <enter> to run adding new per page option\n    $perPageInput.keypress(function (e) {\n        if (e.which == 13) {\n            $perPageInputButton.click();\n            return false;\n        }\n    });\n\n    $perPage.asmSelect({\n        addItemTarget: 'bottom',\n        animate: false,\n        hideWhenAdded: true,\n        highlight: true,\n        listType: 'ul',\n        selectClass: 'hide',\n        sortable: true,\n        highlightOutsideContainer: false,\n        removeLabel: 'x',\n        svgUrl: $isbnList.attr('data-svg-url')\n    });\n\n    // Redo the default per page options when change to the per page options\n    $('body').on('change', '#per_page', function () {\n        var $perPageSelectedOptions = $perPage.children(\"option:selected\");\n        var $perPageDefaultSelectedOptions = $perPageDefault.children(\"option\");\n\n        // If no change, return\n        if ($perPageSelectedOptions.length === $perPageDefaultSelectedOptions.length) {\n            return false;\n        }\n\n        // Get current set default value for use later\n        var currentPerPageDefaultValue = $perPageDefault.select2(\"val\");\n\n        // Sort the values into the order we want\n        $perPageSelectedOptions.sort(function (a, b) {\n            a = a.value;\n            b = b.value;\n            return a - b;\n        });\n\n        // Reset dropdown with the default value\n        $perPageDefault.empty().append($(\"<option>\").text(\"No default set\").val(\"\"));\n\n        // Loop through the new ordered values and add to options, selecting if old selected still there\n        $perPageSelectedOptions.each(function () {\n            var newOption = $(\"<option>\").text($(this).val()).val($(this).val());\n            if (currentPerPageDefaultValue === $(this).val()) {\n                newOption.attr(\"selected\", true);\n            }\n            $perPageDefault.append(newOption);\n        });\n\n        // Set value to \"No default set\" when no value set in previous .each, warning if there was a value before\n        if (!$perPageDefault.select2(\"val\")) {\n            // Below is required as the dropdown doesn't highlight correctly if nothing set\n            $perPageDefault.select2(\"val\", \"\");\n            if (currentPerPageDefaultValue) {\n                alert('You have removed the set default value');\n            }\n        }\n    });\n\n    // Set sort by ASM select\n    $perPage.html($(\"option\", $perPage).sort(function (a, b) {\n        var arel = $(a).attr('rel');\n        var brel = $(b).attr('rel');\n        return arel == brel ? 0 : arel < brel ? -1 : 1;\n    }));\n\n    // Move dropdown out of container\n    var $priceLocale = $('.supapress-price-locale-asm');\n    $priceLocale.prependTo($priceLocale.parents('.supapress-field-wrapper'));\n    $priceLocale.siblings('label').prependTo($priceLocale.parents('.supapress-field-wrapper'));\n\n    // Set filters ASM select\n    $filters.html($(\"option\", $filters).sort(function (a, b) {\n        var arel = $(a).attr('rel');\n        var brel = $(b).attr('rel');\n        return arel == brel ? 0 : arel < brel ? -1 : 1;\n    }));\n\n    $filters.asmSelect({\n        addItemTarget: 'bottom',\n        animate: false,\n        hideWhenAdded: true,\n        highlight: true,\n        listType: 'ul',\n        selectClass: 'supapress-dropdown supapress-filters-asm supapress-reorder-dropdown',\n        sortable: true,\n        highlightOutsideContainer: false,\n        removeLabel: 'x',\n        svgUrl: $isbnList.attr('data-svg-url')\n    });\n\n    // Move dropdown out of container\n    var $filtersAsm = $('.supapress-filters-asm');\n    $filtersAsm.prependTo($filtersAsm.parents('.supapress-field-wrapper'));\n    $filtersAsm.siblings('label').prependTo($filtersAsm.parents('.supapress-field-wrapper'));\n\n    // Set sort by ASM select\n    $sortBy.html($(\"option\", $sortBy).sort(function (a, b) {\n        var arel = $(a).attr('rel');\n        var brel = $(b).attr('rel');\n        return arel == brel ? 0 : arel < brel ? -1 : 1;\n    }));\n\n    $sortBy.asmSelect({\n        addItemTarget: 'bottom',\n        animate: false,\n        hideWhenAdded: true,\n        highlight: true,\n        listType: 'ul',\n        selectClass: 'supapress-dropdown supapress-sort-by-asm supapress-reorder-dropdown',\n        sortable: true,\n        highlightOutsideContainer: false,\n        removeLabel: 'x',\n        svgUrl: $isbnList.attr('data-svg-url')\n    });\n\n    // Move dropdown out of container\n    var $sortByAsm = $('.supapress-sort-by-asm');\n    $sortByAsm.prependTo($sortByAsm.parents('.supapress-field-wrapper'));\n    $sortByAsm.siblings('label').prependTo($sortByAsm.parents('.supapress-field-wrapper'));\n\n    $clearCacheButton.on('click', function () {\n        if($clearCacheButton.hasClass('disabled')) {\n            return;\n        }\n        var resetButton = function() {\n            $clearCacheButton.removeClass('disabled');\n            $clearCacheButton.css('opacity', 1).text('Clear Cache');\n        };\n        $clearCacheButton.addClass('disabled').css('opacity', 0.2).text('Clearing...');\n\n        $.ajax({\n            url: 'admin-ajax.php?action=supapress_cache_clear',\n            type: 'GET',\n            dataType: 'json',\n            success: function (data) {\n                if (data.filesRemoved === 0) {\n                    $(this).updateMessage('There were no cached files to remove.', 'warning');\n                } else {\n                    var tense = data.filesRemoved === 1 ? ' has' : 's have';\n                    $(this).updateMessage(data.filesRemoved + ' cached file' + tense + ' been removed.', 'success');\n                }\n                resetButton();\n            },\n            error: function(data) {\n                if(console && 'error' in console) {\n                    console.error(data);\n                }\n                resetButton();\n            }\n        });\n    });\n\n\n    // Add predictive\n    $isbnLookup.autocomplete({\n        source: function (request, response) {\n            $.ajax({\n                url: isbnLookupAjaxUrl + '?action=supapress_predictive',\n                type: 'POST',\n                data: {\n                    term: $isbnLookup.val()\n                },\n                success: function (data) {\n                    if (data.predictive !== null && data.predictive instanceof Array) {\n                        response($.map(data.predictive, function (item) {\n                            if (typeof item.id !== 'undefined') {\n                                return {\n                                    label: item.name + ' (' + item.id + ')',\n                                    value: item.id + '|||' + item.name\n                                };\n                            }\n                        }));\n                    }\n\n                    $isbnLookup.removeClass('ui-autocomplete-loading');\n                }\n            });\n        },\n        minLength: 2,\n        open: function () {\n            $(this).data(\"uiAutocomplete\").menu.element.addClass(\"supapress-autocomplete\");\n        },\n        autoFocus: true,\n        focus: function (event) {\n            event.preventDefault();\n        },\n        select: function (event, ui) {\n            $isbnLookup.val(ui.item.value);\n\n            if (typeof event.keyCode === 'undefined' || event.keyCode !== 13) {\n                var e = jQuery.Event('keydown');\n                e.which = e.keyCode = 13;\n                $isbnLookup.trigger(e);\n            }\n\n            event.preventDefault();\n        }\n    });\n\n    $isbnLookup.on('keydown', function (e) {\n        if (e.keyCode === 13) {\n            var details = $isbnLookup.val().split('|||'),\n                $option;\n\n            if (details.length > 1) {\n                var isbn = details[0],\n                    title = details[1];\n\n                if (/^9\\d{12}$/.test(isbn) && $isbnList.find('option[data-isbn=\"' + isbn + '\"]:selected').length === 0) {\n                    $option = $(\"<option>\").text(title + ' (' + isbn + ')').val($isbnLookup.val()).attr({\n                        \"selected\": true,\n                        \"data-isbn\": isbn\n                    });\n                    $isbnList.append($option).change();\n                }\n\n                $isbnLookup.val('').removeClass('ui-autocomplete-loading');\n            } else if (/^9\\d{12}$/.test($isbnLookup.val()) && $isbnList.find('option[data-isbn=\"' + $isbnLookup.val() + '\"]:selected').length === 0) {\n                $.ajax({\n                    url: isbnLookupAjaxUrl + '?action=supapress_isbn_lookup',\n                    type: 'POST',\n                    data: {\n                        isbn: $isbnLookup.val()\n                    },\n                    success: function (data) {\n                        var title,\n                            $option = $(\"<option>\");\n\n                        if (typeof data === 'string') {\n                            title = 'ISBN not found';\n                            $option.addClass('book-not-found');\n                        } else {\n                            title = data.search[0].title;\n                        }\n\n                        $option.text(title + ' (' + $isbnLookup.val() + ')').val($isbnLookup.val() + '|||' + title).attr({\n                            \"selected\": true,\n                            \"data-isbn\": $isbnLookup.val()\n                        });\n\n                        $isbnList.append($option).change();\n                        $isbnLookup.val('').removeClass('ui-autocomplete-loading');\n                    }\n                });\n            } else {\n                $isbnLookup.val('').removeClass('ui-autocomplete-loading');\n            }\n\n            e.preventDefault();\n            return false;\n        }\n    });\n\n    $.each($isbnContainer.find('.book-not-found'), function (index, value) {\n        var $option = $(value),\n            isbn = $option.attr('data-isbn');\n\n        $.ajax({\n            url: isbnLookupAjaxUrl + '?action=supapress_isbn_lookup',\n            type: 'POST',\n            data: {\n                isbn: isbn\n            },\n            success: function (data) {\n                if (typeof data !== 'string') {\n                    var title = data.search[0].title,\n                        $newOption = $(\"<option>\");\n\n                    $newOption.text(title + ' (' + isbn + ')').val(isbn + '|||' + title).attr({\n                        \"selected\": true,\n                        \"data-isbn\": isbn\n                    });\n\n                    $option.remove();\n                    $isbnList.append($newOption).change();\n                }\n            }\n        });\n    });\n\n    if ($lookupCollection.length > 0) {\n        $.ajax({\n            url: isbnLookupAjaxUrl + '?action=supapress_collections',\n            type: 'POST',\n            data: {},\n            success: function (data) {\n                if (typeof data.collection !== 'undefined' && data.collection !== null) {\n                    var $newOption;\n\n                    $.each(data.collection, function (index, value) {\n                        $newOption = $(\"<option>\");\n\n                        $newOption.text(value.name).val(value.seo_name).attr({\n                            \"data-id\": value.id,\n                            \"data-seo\": value.seo_name\n                        });\n\n                        $lookupCollection.append($newOption);\n\n                        if ($lookupCollection.attr('data-value') === value.seo_name) {\n                            $lookupCollection.val(value.seo_name);\n                        }\n                    });\n                }\n\n                if (typeof data.catalogId !== 'undefined' && data.catalogId !== null) {\n                    $lookupCollection.attr('data-catalog-id', data.catalogId);\n\n                    // On change update link to collection\n                    $lookupCollection.on('change', function () {\n                        $editCollectionButton.attr('href', 'http://www.supafolio.com/catalog/' + $lookupCollection.attr('data-catalog-id') + '/collection/' + $lookupCollection.find(\":selected\").attr('data-seo') + '/book');\n                    });\n\n                    // Trigger change to set url on page load\n                    $lookupCollection.trigger('change');\n                }\n            }\n        });\n    }\n\n    $('.upload_image_button').click(function () {\n        var formfieldId = $('input[data-button=\"' + $(this).attr('id') + '\"]').attr('id'),\n            originalFunction = window.send_to_editor;\n\n        tb_show('', 'media-upload.php?type=image&TB_iframe=true');\n\n        window.send_to_editor = function (html) {\n            var imgurl = $('img', html).attr('src');\n            $('#' + formfieldId).val(imgurl).trigger('change');\n            tb_remove();\n            window.send_to_editor = originalFunction;\n        };\n\n        return false;\n    });\n\n    window.send_to_editor = function (html) {\n        var imgurl = $('img', html).attr('src');\n        $('#upload_image').val(imgurl);\n        tb_remove();\n    };\n\n    $arrowUpload.on('change paste keyup', function () {\n        var $this = $(this),\n            $preview = $this.siblings('.image-preview'),\n            src = $.trim($this.val()) === '' ? $preview.attr('data-default-src') : $this.val();\n\n        $preview.attr('src', src);\n    });\n\n    // Trigger on page load to set preview\n    $arrowUpload.trigger('change');\n\n    // Show image upload fields when arrows clicked\n    $arrowPreview.on('click', function () {\n        $(this).siblings('.arrow-upload, .placeholder-upload, .upload-button').css('visibility', 'visible');\n    });\n\n    // Placeholder plugin for IE9 support\n    $('input').placeholder();\n\n    // Force numbers only on inputs\n    $('input.numbers-only').on('keyup', function () {\n        var value = parseInt(this.value.replace(/[^0-9]/g, ''));\n        this.value = isNaN(value) ? '' : value;\n    });\n\n    // Set select to data-value attribute on page load\n    $('select[data-value]').each(function () {\n        var $this = $(this),\n            value = $this.find('option[value=\"' + $this.attr('data-value') + '\"]').length === 0 ? '-1' : $this.attr('data-value');\n\n        $this.val(value);\n    });\n\n    // Show/hide domain slug on Links settings\n    $('.widget_link_page').on('change', function () {\n        var $this = $(this),\n            $parents = $this.parents('.book-url'),\n            $slug = $parents.find('.supapress-domain-slug');\n\n        if ($this.val() < 0) {\n            $slug.addClass('hide');\n        } else {\n            $slug.removeClass('hide');\n        }\n\n        var $urlPattern = $parents.find('.widget_link_pattern');\n        $urlPattern.trigger('change');\n    });\n\n    // Set tooltips\n    $('.supapress-tooltip-wrapper').tooltip({\n        tooltipClass: \"supapress-ui-tooltip\",\n        content: function (callback) {\n            callback($(this).prop('title').replace('<br />', '<br />'));\n        },\n        position: {\n            my: \"center bottom-5\",\n            at: \"center top\",\n            collision: 'none',\n            using: function (position, feedback) {\n                $(this).css(position);\n                $(\"<div>\")\n                    .addClass(\"supapress-tooltip-arrow\")\n                    .addClass(feedback.vertical)\n                    .addClass(feedback.horizontal)\n                    .appendTo(this);\n            }\n        }\n    });\n\n    // When the select2 dropdown is opening (before being displayed) reorder the values. If it is the first value\n    // assume it is the \"Please {do something}\" text and set to blank so it remains as the first element in the <li>\n    $.fn.reorderSelect2Dropdown = function () {\n        var $this = $(this);\n\n        // Only relevant to asmSelect elements which have a new class set\n        if ($this.hasClass('supapress-reorder-dropdown')) {\n            $this.html($(\"option\", $(this)).sort(function (a, b) {\n                var at = $(a).is(':first-child') ? '' : $(a).text(),\n                    bt = $(b).is(':first-child') ? '' : $(b).text();\n                return (at > bt) ? 1 : ( (at < bt) ? -1 : 0 );\n            }));\n\n            // Set first child back to 'selected' state so can't be selected as creates an\n            // empty select option in sortable elements and unselectable last element\n            $this.find(':first-child').attr('selected', true);\n        }\n    };\n\n    // search filter ASM selects\n    $searchFilterLists.each(function () {\n        $(this).asmSelect({\n            addItemTarget: 'bottom',\n            animate: false,\n            hideWhenAdded: true,\n            highlight: true,\n            listType: 'ul',\n            selectClass: 'supapress-dropdown supapress-search-restriction-asm supapress-reorder-dropdown',\n            sortable: true,\n            highlightOutsideContainer: false,\n            removeLabel: 'x',\n            svgUrl: $(this).attr('data-svg-url')\n        });\n    });\n\n    // Move dropdown out of container\n    $('.supapress-search-restriction-asm').each(function () {\n        var $this = $(this);\n        $this.prependTo($this.parents('.supapress-field-wrapper'));\n        $this.siblings('label').prependTo($this.parents('.supapress-field-wrapper'));\n    });\n\n    // Set selects to be styled\n    // $('.supapress-dropdown').select2({\n    //     minimumResultsForSearch: 10\n    // }).on('select2:opening', $(this).reorderSelect2Dropdown);\n\n    $('#bulk-action-selector-top, #bulk-action-selector-bottom').select2({\n        minimumResultsForSearch: 10,\n        dropdownCssClass: 'list-page-select2'\n    });\n\n    $('#widget-type-selector-top, #widget-type-selector-bottom').select2({\n        minimumResultsForSearch: 10,\n        dropdownCssClass: 'list-page-select2'\n    });\n\n    $.fn.updateMessage = function (message, level) {\n        // Remove classes which may be attached to warning - don't want to blanket remove all, i.e. display inline\n        $message.removeClass('success warning updated created deleted error hide');\n        $message.html('<p>' + message + '</p>').addClass(level);\n    };\n\n    // do checks for elements which should be filled in\n    $supapressAddEditForm.on('submit', function () {\n        // look for the per page default setting being filled in\n        if ($showPerPage.is(':checked') && $perPageDefault.val() === '') {\n            $(this).updateMessage('Please choose a default value for \\'search per page\\'', 'warning');\n            $(window).scrollTop(0);\n            return false;\n        }\n        return true;\n    });\n\n    // Enable SVGs for IE\n    svg4everybody();\n})(jQuery);\n(function ($) {\n    window.supapress = window.supapress || {};\n    \n    supapress.$wrap = null;\n    supapress.$message = null;\n    supapress.$form = null;\n    supapress.$urlPattern = null;\n    supapress.bookUrlOptions = [\n        { value : \"isbn13\", label : \"ISBN-13\", example : \"9998887770001\" },\n        { value : \"isbn10\", label : \"ISBN-10\", example : \"8765432101\" },\n        { value : \"title\", label : \"Title\", example : \"my-book\" },\n        { value : \"format\", label : \"Format\", example : \"my-format\" },\n        { value : \"text-title\", label : \"Full Book Title\", example : \"My Book\" },\n        { value : \"author\", label : \"Author\", example : \"my-author\" },\n        { value : \"imprint\", label : \"Imprint\", example : \"my-imprint\" },\n        { value : \"publisher\", label : \"Publisher\", example : \"my-publisher\" },\n        { value : \"description\", label : \"Description\", example : \"my description\" }\n    ];\n    supapress.resultCountTextOptions = [\n        { value : \"total\", label : \"Total Results\", example : \"100\" },\n        { value : \"pagestart\", label : \"Page Start\", example : \"1\" },\n        { value : \"pageend\", label : \"Page End\", example : \"10\" }\n    ];\n    supapress.searchTermTextOptions = [\n        { value : \"term\", label : \"Search Term\", example : \"Lord of the Rings\" }\n    ];\n\n    $.fn.insertAtCaret = function (newText) {\n        var $this = $(this),\n            start = $this.prop(\"selectionStart\"),\n            end = $this.prop(\"selectionEnd\"),\n            text = $this.val(),\n            before = text.substring(0, start),\n            after  = text.substring(end, text.length);\n\n        $this.val(before + newText + after);\n        $this[0].selectionStart = $this[0].selectionEnd = start + newText.length;\n        $this.focus();\n    };\n\n    $.fn.addAutoComplete = function (options) {\n        var $this = $(this);\n\n        $this.autocomplete({\n            source: options,\n            minLength: 0,\n            open: function () {\n                $(this).data(\"uiAutocomplete\").menu.element.addClass(\"supapress-autocomplete\");\n            },\n            focus: function (event) {\n                event.preventDefault();\n            },\n            select: function (event, ui) {\n                $this.insertAtCaret(ui.item.value + '%');\n                return false;\n            }\n        }).autocomplete( \"instance\" )._renderItem = function( ul, item ) {\n            return $( \"<li>\" ).append( item.label ) .appendTo( ul );\n        };\n\n        $this.on('keydown', function(e) {\n            if(e.which === 13) {\n                return false;\n            }\n        });\n\n        $this.on('keyup', function(e) {\n            if(e.shiftKey && e.which === 53) {\n                $this.autocomplete( \"search\", \"\" );\n            }\n        });\n\n        $this.on('change paste keyup', function() {\n            var value = $this.val(),\n                $bookUrl = $this.parents('.book-url'),\n                relativeLink,\n                regex;\n\n            if(!$bookUrl.length) {\n                return;\n            }\n\n            relativeLink = $bookUrl.find('.widget_link_page').val() > 0;\n\n            $.each(options, function(index, obj) {\n                regex = new RegExp(\"%\" + obj.value + \"%\",\"g\");\n                value =  value.replace(regex, obj.example );\n            });\n\n            $this.parents('.book-url').find('.widget_link_preview').html( '<span class=\"placeholder\">' + (relativeLink ? $(\".supapress-domain-slug\").html()  : '') + value +'</span>' );\n        });\n\n        $this.on('blur', function() {\n            var $this = $(this);\n\n            if($.trim($this.val()) === '' && $this.data('default')) {\n                $this.val($this.data('default'));\n            }\n\n            // clean up book urls to remove any left slashes\n            if ( /\\/$/.test($this.val()) && $this.data('trim-trailing-slash')) {\n                $this.val( $this.val().replace( /\\/+$/, '') );\n            }\n\n            $this.trigger('change');\n        });\n\n        $this.trigger('blur');\n    };\n\n    $.fn.supapressAdminInit = function () {\n        supapress.$wrap = this;\n        supapress.$message = supapress.$wrap.find('#message');\n        supapress.$form = supapress.$wrap.find('#supapress-settings-form');\n        supapress.$urlPattern = supapress.$wrap.find('.widget_link_pattern');\n        supapress.$resultCountText = $('#supapress-result-count-text');\n        supapress.$searchTermText = $('#supapress-search-term-text');\n        supapress.$seoCanonical = $('#supapress-product-details-seo-canonical');\n\n        // Attach autocomplete to each url pattern\n        $.each(supapress.$urlPattern, function() {\n           $(this).addAutoComplete(supapress.bookUrlOptions);\n        });\n\n        // add autocomplete for the search term message and result count options\n        supapress.$resultCountText.addAutoComplete(supapress.resultCountTextOptions);\n        supapress.$searchTermText.addAutoComplete(supapress.searchTermTextOptions);\n\n        // Catch form submit for validation checks\n        supapress.$form.on('submit', function() {\n            var error = false;\n\n            // validation for book urls\n            supapress.$wrap.find('.book-url .widget_link_pattern').each(function() {\n                var $this = $(this),\n                    pattern = $this.val(),\n                    page = $this.parents('.supapress-accordion-content-inner').find('.widget_link_page'),\n                    domainProtocolRegExp = new RegExp(\"^http(s*):\\/\\/\"),\n                    errorMessage = '',\n                    pageVal = parseInt(page.val());\n\n                if (pageVal > 0) {\n                    if (/%isbn13%/.test(pattern) === false) {\n                        errorMessage = 'Book page URLs must contain an ISBN-13 so we can find your book. Please make sure \"%isbn13%\" is found in your url patterns.';\n                    } else if (domainProtocolRegExp.test(pattern) !== false) {\n                        errorMessage = 'Book page URLs should not contain the full URL.';\n                    } else if (/^\\//.test(pattern) === false) {\n                        errorMessage = 'Book page URLs must start with a slash';\n                    }\n                } else if (pageVal === -2 && domainProtocolRegExp.test(pattern) === false) {\n                    errorMessage = 'External links should contain the full URL.';\n                }\n\n                if (errorMessage) {\n                    supapress.$message.addClass('warning').removeClass('hide');\n                    supapress.$message.find('p').text(errorMessage);\n                    supapress.$wrap.find('.nav-tab[data-tab=\"links\"]').trigger('click');\n                    error = true;\n                    return false;\n                }\n            });\n\n            // validation for canonical\n            var pattern = supapress.$seoCanonical.val(),\n                domainProtocolRegExp = new RegExp(\"^http(s*):\\/\\/\"),\n                errorMessage = '';\n\n            if (/%isbn13%/.test(pattern) === false) {\n                errorMessage = 'Canonical URL must contain an ISBN-13 so we can find your book. Please make sure \"%isbn13%\" is found in your url patterns.';\n            } else if (domainProtocolRegExp.test(pattern) !== false) {\n                errorMessage = 'Canonical URL should not contain the full URL.';\n            } else if (/^\\//.test(pattern) === false) {\n                errorMessage = 'Canonical URL must start with a slash';\n            }\n\n            if (errorMessage) {\n                supapress.$message.addClass('warning').removeClass('hide');\n                supapress.$message.find('p').text(errorMessage);\n                supapress.$wrap.find('.nav-tab[data-tab=\"seo\"]').trigger('click');\n                error = true;\n            }\n\n            if(error === true) {\n                return false;\n            }\n        });\n\n    };\n\n    $(function() {\n        $('div.supapress-wrap.settings').supapressAdminInit();\n    });\n})(jQuery);\n"]}