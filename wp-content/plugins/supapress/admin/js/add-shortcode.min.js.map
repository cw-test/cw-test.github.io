{"version":3,"sources":["add-shortcode.min.js"],"names":["window","$","enhanceDropDown","each","e","i","$select2","select2","width","on","find","remove","data","$dropdown","addClass","dropdown","old_tb_remove","tb_remove","length","document","ajaxComplete","event","XMLHttpRequest","ajaxOptions","split","widget","request","pairs","decodeURIComponent","action","parents","responseText","trigger","wpWidgets","save","bind","preventDefault","text","$chosenOption","elt","get","$tbContent","selectedIndex","val","options","wp","media","editor","insert","insertAfter","jQuery"],"mappings":"CAAA,SAAUA,EAAQC,GACd,YAEAA,GAAE,SAASA,GAwCP,QAASC,KACLD,EAAE,uBAAuBE,KAAK,SAAUC,EAAGC,GACvCC,EAAWL,EAAEI,GAAGE,SAASC,MAAO,SAASC,GAAG,iBAAkB,WAC1DR,EAAE,mBAAmBS,KAAK,WAAWC,WAEtCL,EAASM,KAAK,WAAWC,UACxBP,EAASM,KAAK,WAAWC,UAAUC,SAAS,0BACtCR,EAASM,KAAK,WAAWG,UAC/BT,EAASM,KAAK,WAAWG,SAASD,SAAS,4BAInDE,EAAgBhB,EAAOiB,UACvBjB,EAAOiB,UAAY,WACZX,GACCA,EAASC,QAAQ,SAErBS,KAxDR,GAAIV,GACAU,CAEDf,GAAE,iBAAiBiB,SAClBjB,EAAEkB,UAAUC,aAAa,SAASC,EAAOC,EAAgBC,GACrD,GAEIlB,GACAmB,EACAC,EAJAC,KACAC,EAAQJ,EAAYX,KAAKY,MAAM,IAKnC,KAAKnB,IAAKsB,GACNH,EAAQG,EAAMtB,GAAGmB,MAAM,KACvBE,EAAQE,mBAAmBJ,EAAM,KAAOI,mBAAmBJ,EAAM,GAGjEE,GAAQG,QAA6B,gBAAnBH,EAAQG,SAC1BJ,EAASxB,EAAE,0BAA4ByB,EAAQ,aAAe,MAAMI,QAAQ,WAGvER,EAAeS,aAIhB9B,EAAEkB,UAAUa,QAAQ,eAAgBP,GAHpCQ,UAAUC,KAAKT,EAAQ,EAAG,EAAG,MASzCxB,EAAEkB,UAAUgB,KAAK,eAAgB,WAC7BjC,OAKRA,IAyBAD,EAAE,+BAA+BQ,GAAG,QAAS,SAASL,GAClDA,EAAEgC,gBAEF,IAGIC,GAHAC,EAAgBrC,EAAE,4BAClBsC,EAAMD,EAAcE,IAAI,GACxBC,EAAaxC,EAAE,kBAMnB,OAFAwC,GAAW/B,KAAK,WAAWC,SAEvB4B,EAAIG,oBACJL,EAAO,IACA,GACCC,EAAcK,OAItBN,EAAOE,EAAIK,QAAQL,EAAIG,eAAeL,KAG1CQ,GAAGC,MAAMC,OAAOC,OAAO,kBAAoBV,EAAcK,MAAQ,YAAcN,EAAO,UACtFpB,eAPIhB,EAAE,sFAAsFgD,YAAYR,EAAW/B,KAAK,QAC7G,QASpBV,OAAQkD","file":"add-shortcode.min.js","sourcesContent":["(function(window, $) {\n    'use strict';\n\n    $(function($) {\n        var $select2,\n            old_tb_remove;\n\n        if($('#widgets-left').length) {\n            $(document).ajaxComplete(function(event, XMLHttpRequest, ajaxOptions) {\n                var request = {},\n                    pairs = ajaxOptions.data.split('&'),\n                    i,\n                    split,\n                    widget;\n\n                for (i in pairs) {\n                    split = pairs[i].split('=');\n                    request[decodeURIComponent(split[0])] = decodeURIComponent(split[1]);\n                }\n\n                if (request.action && request.action === 'save-widget') {\n                    widget = $('input.widget-id[value=\"' + request['widget-id'] + '\"]').parents('.widget');\n\n                    // Trigger manual save, if this was the save request and if we didn't get the form html response.\n                    if (!XMLHttpRequest.responseText) {\n                        wpWidgets.save(widget, 0, 1, 0);\n                    } else {\n                        // We got a response, this could be either our request above, or a correct widget-save call, so fire an event on which we can hook our code.\n                        $(document).trigger('saved_widget', widget);\n                    }\n                }\n            });\n\n            // enhance the drop down whenever the html is added to the page\n            $(document).bind('saved_widget', function() {\n                enhanceDropDown();\n            });\n        }\n\n        // enhance drop down on startup\n        enhanceDropDown();\n\n        // add select 2 to drop down boxes\n        function enhanceDropDown() {\n            $('.supapress-dropdown').each(function (e, i) {\n                $select2 = $(i).select2({width: '100%'}).on('select2:select', function() {\n                    $('#TB_ajaxContent').find('.notice').remove();\n                });\n                if($select2.data('select2').$dropdown) {\n                    $select2.data('select2').$dropdown.addClass(\"supapress-select2-drop\");\n                } else if($select2.data('select2').dropdown) {\n                    $select2.data('select2').dropdown.addClass(\"supapress-select2-drop\");\n                }\n            });\n\n            old_tb_remove = window.tb_remove;\n            window.tb_remove = function() {\n                if($select2) {\n                    $select2.select2('close');\n                }\n                old_tb_remove();\n            };\n        }\n\n        // Add shortcode in WordPress post editor.\n        $('#supapress-insert-shortcode').on('click', function(e) {\n            e.preventDefault();\n\n            var $chosenOption = $('#supapress-choose-module'),\n                elt = $chosenOption.get(0),\n                $tbContent = $('#TB_ajaxContent'),\n                text;\n\n            // Remove any previous errors\n            $tbContent.find('.notice').remove();\n\n            if (elt.selectedIndex === -1) {\n                text = '';\n                return false;\n            } else if (!$chosenOption.val()) {\n                $('<div class=\"notice notice-error\"><p>Please select a module from the list</p></div>').insertAfter($tbContent.find('h1'));\n                return false;\n            } else {\n                text = elt.options[elt.selectedIndex].text;\n            }\n\n            wp.media.editor.insert('[supapress id=\"' + $chosenOption.val() + '\" title=\"' + text + '\"]');\n            tb_remove();\n        });\n    });\n})(window, jQuery);\n"]}